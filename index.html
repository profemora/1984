<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1984 Escape Room - The Ministry of Love</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .title {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-size: 1.2rem;
            color: #888;
            margin-bottom: 20px;
        }

        .screen {
            background: rgba(0,0,0,0.8);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
        }

        .intro-screen {
            text-align: center;
            animation: fadeIn 2s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .big-brother-eye {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: radial-gradient(circle, #ff4757 0%, #ff3742 100%);
            border-radius: 50%;
            position: relative;
            animation: pulse 2s infinite;
        }

        .big-brother-eye::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #000;
            border-radius: 50%;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .room {
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .room.active {
            display: block;
        }

        .room-title {
            font-size: 2rem;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-align: center;
        }

        .challenge {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #feca57;
        }

        .challenge-intro {
            background: rgba(255,107,107,0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-style: italic;
            border-left: 3px solid #ff6b6b;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: #feca57;
            font-weight: bold;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid #555;
            border-radius: 5px;
            color: #e0e0e0;
            font-family: inherit;
        }

        .input-group input:focus, .input-group select:focus, .input-group textarea:focus {
            outline: none;
            border-color: #feca57;
            box-shadow: 0 0 10px rgba(254,202,87,0.3);
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 10px 0;
        }

        .radio-option {
            background: rgba(255,255,255,0.05);
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .radio-option:hover {
            background: rgba(255,255,255,0.1);
            border-color: #feca57;
        }

        .radio-option input[type="radio"] {
            margin-right: 10px;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #feca57);
            transition: width 0.5s ease;
            width: 0%;
        }

        .message {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            animation: fadeIn 0.5s ease-in;
        }

        .message.success {
            background: rgba(39, 174, 96, 0.2);
            border: 1px solid #27ae60;
            color: #2ecc71;
        }

        .message.error {
            background: rgba(231, 76, 60, 0.2);
            border: 1px solid #e74c3c;
            color: #e74c3c;
        }

        .hint {
            background: rgba(52, 152, 219, 0.2);
            border: 1px solid #3498db;
            color: #3498db;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .completion-screen {
            text-align: center;
            display: none;
        }

        .completion-screen.show {
            display: block;
            animation: fadeIn 1s ease-in;
        }

        .trophy {
            font-size: 4rem;
            color: #feca57;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            60% { transform: translateY(-10px); }
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .typewriter {
            overflow: hidden;
            border-right: 2px solid #feca57;
            white-space: nowrap;
            animation: typing 3s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent; }
            50% { border-color: #feca57; }
        }

        .navigation {
            text-align: center;
            margin-top: 20px;
        }

        .room-indicator {
            display: inline-flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .room-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }

        .room-dot.active {
            background: #feca57;
            transform: scale(1.2);
        }

        .room-dot.completed {
            background: #27ae60;
        }

        .quote-box {
            background: rgba(255,255,255,0.05);
            border-left: 4px solid #ff6b6b;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            position: relative;
        }

        .quote-box::before {
            content: '"';
            font-size: 2rem;
            color: #ff6b6b;
            position: absolute;
            top: -5px;
            left: 10px;
        }

        /* Big Brother Cursor Eye */
        .big-brother-cursor-eye {
            position: fixed;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ff4757 0%, #ff0000 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.7);
            opacity: 0.7;
            transition: transform 0.1s ease-out;
            display: none; /* Initially hidden */
        }
        
        .big-brother-cursor-eye::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: #000;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }
        
        .big-brother-cursor-eye::after {
            content: '';
            position: absolute;
            top: 15px;
            left: 15px;
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .container {
                padding: 10px;
            }
            
            .screen {
                padding: 15px;
            }
            
            .radio-group {
                font-size: 0.9rem;
            }

            .big-brother-cursor-eye {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="big-brother-cursor-eye" id="cursorEye"></div>

    <div class="container">
        <div class="header">
            <h1 class="title">1984</h1>
            <p class="subtitle">Digital Escape Room</p>
            <div class="room-indicator" id="roomIndicator"></div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <!-- Introduction Screen -->
        <div class="screen intro-screen" id="introScreen">
            <div class="big-brother-eye"></div>
            <h2 class="typewriter">BIG BROTHER IS WATCHING YOU</h2>
            <p style="margin: 20px 0;">You are trapped in the Ministry of Love in Oceania. To escape, you must demonstrate your understanding of George Orwell's totalitarian world.</p>
            <p style="margin-bottom: 30px;">Solve the puzzles, overcome the challenges, and earn your mental freedom!</p>
            <div class="quote-box">
                Who controls the past controls the future: who controls the present controls the past.
            </div>
            <button class="btn" onclick="startGame()">BEGIN YOUR ESCAPE</button>
        </div>

        <!-- Room 1: The Ministry of Truth -->
        <div class="screen room" id="room1">
            <h2 class="room-title">Room 1: The Ministry of Truth</h2>
            <div class="challenge-intro">
                Winston's job involves constantly "rectifying" history to align with the Party's ever-changing narrative. The Party systematically alters all historical records to ensure its infallibility.
            </div>
            <div class="challenge">
                <h3>Historical Manipulation Challenge</h3>
                <p>The Party controls reality by manipulating the past. Answer these questions about historical control in 1984:</p>
                
                <div class="input-group">
                    <label>Complete the Party slogan: "Who controls the past controls the _______"</label>
                    <input type="text" id="pastControl" placeholder="Enter the missing word">
                </div>
                
                <div class="input-group">
                    <label>What is Winston's job at the Ministry of Truth?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="winstonJob" value="surveillance"> Monitoring telescreens
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="winstonJob" value="rectifying"> Rectifying historical records
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="winstonJob" value="propaganda"> Creating propaganda posters
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Why does the Party manipulate historical records? (Select the main reason)</label>
                    <select id="manipulationReason">
                        <option value="">Choose...</option>
                        <option value="infallibility">To ensure the Party's infallibility</option>
                        <option value="entertainment">For public entertainment</option>
                        <option value="efficiency">To improve government efficiency</option>
                    </select>
                </div>
                
                <button class="btn" onclick="checkRoom1()">Submit Analysis</button>
                <div class="hint" style="display: none;" id="hint1">
                    Hint: Think about how controlling historical records prevents citizens from having "standards of comparison."
                </div>
            </div>
            <div id="message1"></div>
        </div>

        <!-- Room 2: Doublethink Laboratory -->
        <div class="screen room" id="room2">
            <h2 class="room-title">Room 2: The Doublethink Laboratory</h2>
            <div class="challenge-intro">
                Doublethink is the mental discipline required to hold two contradictory beliefs simultaneously and accept both as true. It represents "controlled insanity" where logic is subverted.
            </div>
            <div class="challenge">
                <h3>Doublethink Analysis</h3>
                <p>Test your understanding of the Party's most important mental control technique:</p>
                
                <div class="input-group">
                    <label>What are the three Party slogans that exemplify doublethink?</label>
                    <input type="text" id="slogan1" placeholder="WAR IS _______">
                    <input type="text" id="slogan2" placeholder="FREEDOM IS _______">
                    <input type="text" id="slogan3" placeholder="IGNORANCE IS _______">
                </div>
                
                <div class="input-group">
                    <label>According to the text, doublethink is NOT mere lying or hypocrisy. What is it?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="doublethinkNature" value="insanity"> A form of "controlled insanity"
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="doublethinkNature" value="confusion"> Simple mental confusion
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="doublethinkNature" value="forgetfulness"> Deliberate forgetfulness
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Complete this quote about doublethink: "In the end the Party would announce that two and two made _______, and you would have to believe it."</label>
                    <input type="text" id="mathDoublethink" placeholder="Enter the number">
                </div>
                
                <button class="btn" onclick="checkRoom2()">Process Doublethink</button>
                <div class="hint" style="display: none;" id="hint2">
                    Hint: Remember that doublethink ensures citizens deny the evidence of their own senses and accept the Party's version of reality.
                </div>
            </div>
            <div id="message2"></div>
        </div>

        <!-- Room 3: Newspeak Department -->
        <div class="screen room" id="room3">
            <h2 class="room-title">Room 3: The Newspeak Department</h2>
            <div class="challenge-intro">
                Newspeak is deliberately designed to narrow the range of thought by reducing vocabulary and eliminating words that could express unorthodox ideas. As Syme explains, the goal is to make thoughtcrime literally impossible.
            </div>
            <div class="challenge">
                <h3>Language Control Challenge</h3>
                <p>Analyze the Party's control of language and thought:</p>
                
                <div class="input-group">
                    <label>What is the main aim of Newspeak according to Syme?</label>
                    <textarea id="newspeakAim" rows="3" placeholder="Explain the primary purpose of Newspeak..."></textarea>
                </div>
                
                <div class="input-group">
                    <label>What is "Crimestop"?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="crimestop" value="police"> A division of the Thought Police
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="crimestop" value="stopping"> The ability to stop dangerous thoughts before they form
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="crimestop" value="punishment"> A type of punishment for thoughtcrime
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>By what year was Newspeak intended to completely replace Oldspeak (Standard English)?</label>
                    <input type="text" id="newspeakYear" placeholder="Enter the year">
                </div>
                
                <div class="input-group">
                    <label>What would be the ultimate result of successful Newspeak implementation?</label>
                    <select id="newspeakResult">
                        <option value="">Choose...</option>
                        <option value="unthinkable">Making heretical thought literally unthinkable</option>
                        <option value="efficiency">More efficient communication</option>
                        <option value="unity">Greater national unity</option>
                    </select>
                </div>
                
                <button class="btn" onclick="checkRoom3()">Analyze Language Control</button>
                <div class="hint" style="display: none;" id="hint3">
                    Hint: Consider how limiting vocabulary affects the capacity for expressing unique thoughts and eliminates individuality.
                </div>
            </div>
            <div id="message3"></div>
        </div>

        <!-- Room 4: The Telescreen Surveillance Center -->
        <div class="screen room" id="room4">
            <h2 class="room-title">Room 4: Telescreen Surveillance Center</h2>
            <div class="challenge-intro">
                Telescreens in every room constantly watch and listen, making private life non-existent. The Thought Police monitor for any signs of disloyalty, punishing even mere thoughts with imprisonment, torture, or "vaporization."
            </div>
            <div class="challenge">
                <h3>Surveillance State Analysis</h3>
                <p>Examine the Party's methods of control through surveillance and terror:</p>
                
                <div class="input-group">
                    <label>What makes private life non-existent for Party members?</label>
                    <input type="text" id="surveillance" placeholder="What technology constantly watches and listens?">
                </div>
                
                <div class="input-group">
                    <label>What do the Thought Police punish people for?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="thoughtPolice" value="actions"> Only completed criminal actions
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="thoughtPolice" value="thoughts"> Future crimes and even mere thoughts
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="thoughtPolice" value="speech"> Only spoken criticism of the Party
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>According to Winston's observation, what is notable about laws in Oceania?</label>
                    <textarea id="oceaniaLaws" rows="2" placeholder="What does Winston observe about formal laws?"></textarea>
                </div>
                
                <div class="input-group">
                    <label>How does pervasive fear condition citizens?</label>
                    <select id="fearEffect">
                        <option value="">Choose...</option>
                        <option value="police">Citizens police themselves</option>
                        <option value="rebel">Citizens become more rebellious</option>
                        <option value="unite">Citizens unite against the Party</option>
                    </select>
                </div>
                
                <button class="btn" onclick="checkRoom4()">Escape Surveillance</button>
                <div class="hint" style="display: none;" id="hint4">
                    Hint: Think about how the constant threat of being watched affects human behavior and self-censorship.
                </div>
            </div>
            <div id="message4"></div>
        </div>

        <!-- Room 5: Room 101 -->
        <div class="screen room" id="room5">
            <h2 class="room-title">Room 5: Room 101</h2>
            <div class="challenge-intro">
                The novel culminates in Winston's torture in Room 101, where individuals face their greatest fear. O'Brien's goal is to change Winston's mind and soul completely, converting him to the Party's ideology.
            </div>
            <div class="challenge">
                <h3>The Ultimate Test</h3>
                <p>Answer these final questions about Winston's complete surrender:</p>
                
                <div class="input-group">
                    <label>What was Winston's greatest fear in Room 101?</label>
                    <input type="text" id="winstonFear" placeholder="What creatures terrified Winston most?">
                </div>
                
                <div class="input-group">
                    <label>What did Winston scream when faced with his ultimate terror?</label>
                    <textarea id="winstonBetrayal" rows="2" placeholder="Complete the quote: 'Do it to...'"></textarea>
                </div>
                
                <div class="input-group">
                    <label>What does Winston's betrayal in Room 101 destroy?</label>
                    <div class="radio-group">
                        <label class="radio-option">
                            <input type="radio" name="betrayalEffect" value="humanity"> His capacity for independent loyalty and feeling - the core of his humanity
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="betrayalEffect" value="memory"> Only his memory of Julia
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="betrayalEffect" value="body"> His physical strength
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>What are the novel's chilling final four words?</label>
                    <input type="text" id="finalWords" placeholder="He _____ _____ _____.">
                </div>
                
                <div class="input-group">
                    <label>According to O'Brien, what is the Party's ultimate motivation?</label>
                    <textarea id="partyMotivation" rows="3" placeholder="What does O'Brien say is the Party's sole interest?"></textarea>
                </div>
                
                <button class="btn" onclick="checkRoom5()">Face Your Fears</button>
                <div class="hint" style="display: none;" id="hint5">
                    Hint: Remember that Room 101 contains "the worst thing in the world" for each individual, and Winston's betrayal represents his complete spiritual destruction.
                </div>
            </div>
            <div id="message5"></div>
        </div>

        <!-- Completion Screen -->
        <div class="screen completion-screen" id="completionScreen">
            <div class="trophy">üèÜ</div>
            <h2>THOUGHTCRIME DOES NOT ENTAIL DEATH</h2>
            <h3>THOUGHTCRIME IS DEATH</h3>
            <p style="font-size: 1.2rem; margin: 20px 0;">You have successfully escaped the Ministry of Love!</p>
            <p>Your understanding of Orwell's dystopian masterpiece has set you free from the Party's control.</p>
            
            <div class="quote-box">
                Freedom is the freedom to say that two plus two make four. If that is granted, all else follows.
            </div>
            
            <div class="stats">
                <div class="stat-card">
                    <h3>Time Spent</h3>
                    <p id="finalTime">--:--</p>
                </div>
                <div class="stat-card">
                    <h3>Total Attempts</h3>
                    <p id="finalAttempts">0</p>
                </div>
                <div class="stat-card">
                    <h3>Analysis Score</h3>
                    <p id="finalScore">0/100</p>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <button class="btn" onclick="restartGame()">Restart Analysis</button>
                <button class="btn" onclick="showReflection()">Reflection Questions</button>
            </div>
        </div>
    </div>

    <script>
        let currentRoom = 0;
        let gameStartTime = null;
        let totalAttempts = 0;
        let roomsCompleted = [];
        let hintsUsed = 0;

        // Initialize the game
        function initGame() {
            updateRoomIndicator();
            updateProgress();
            
            // Initialize cursor eye
            const eye = document.getElementById('cursorEye');
            document.addEventListener('mousemove', function(e) {
                const x = e.clientX;
                const y = e.clientY;
                
                const eyeX = x + (Math.random() * 10 - 5);
                const eyeY = y + (Math.random() * 10 - 5);
                
                eye.style.left = eyeX + 'px';
                eye.style.top = eyeY + 'px';
                eye.style.transform = `translate(-50%, -50%) scale(${1 + Math.random() * 0.1})`;
            });
            
            // Make the eye blink randomly
            setInterval(function() {
                eye.style.height = '5px';
                setTimeout(function() {
                    eye.style.height = '60px';
                }, 200);
            }, 3000 + Math.random() * 5000);
        }

        function startGame() {
            gameStartTime = new Date();
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('cursorEye').style.display = 'block';
            showRoom(1);
        }

        function showRoom(roomNumber) {
            // Hide all rooms
            const rooms = document.querySelectorAll('.room');
            rooms.forEach(room => room.classList.remove('active'));
            
            // Show current room
            document.getElementById(`room${roomNumber}`).classList.add('active');
            currentRoom = roomNumber;
            updateRoomIndicator();
        }

        function updateRoomIndicator() {
            const indicator = document.getElementById('roomIndicator');
            indicator.innerHTML = '';
            
            for (let i = 1; i <= 5; i++) {
                const dot = document.createElement('div');
                dot.className = 'room-dot';
                
                if (i === currentRoom) {
                    dot.classList.add('active');
                } else if (roomsCompleted.includes(i)) {
                    dot.classList.add('completed');
                }
                
                indicator.appendChild(dot);
            }
        }

        function updateProgress() {
            const progress = (roomsCompleted.length / 5) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showMessage(roomId, message, type) {
            const messageDiv = document.getElementById(`message${roomId}`);
            messageDiv.innerHTML = `<div class="message ${type}">${message}</div>`;
        }

        function showHint(roomId) {
            document.getElementById(`hint${roomId}`).style.display = 'block';
            hintsUsed++;
        }

        // Room 1 Verification - Ministry of Truth
        function checkRoom1() {
            totalAttempts++;
            const pastControl = document.getElementById('pastControl').value.toLowerCase().trim();
            const winstonJob = document.querySelector('input[name="winstonJob"]:checked')?.value;
            const manipulationReason = document.getElementById('manipulationReason').value;
            
            if (pastControl === 'future' && 
                winstonJob === 'rectifying' && 
                manipulationReason === 'infallibility') {
                
                roomsCompleted.push(1);
                showMessage(1, 'Excellent! You understand how the Party controls reality by manipulating historical records. "Who controls the past controls the future: who controls the present controls the past."', 'success');
                updateProgress();
                updateRoomIndicator();
                
                setTimeout(() => showRoom(2), 2500);
            } else {
                showMessage(1, 'Incorrect analysis. The Party demands precision in understanding its methods of historical control!', 'error');
                if (totalAttempts >= 2) showHint(1);
            }
        }

        // Room 2 Verification - Doublethink
        function checkRoom2() {
            totalAttempts++;
            const slogan1 = document.getElementById('slogan1').value.toLowerCase().trim();
            const slogan2 = document.getElementById('slogan2').value.toLowerCase().trim();
            const slogan3 = document.getElementById('slogan3').value.toLowerCase().trim();
            const doublethinkNature = document.querySelector('input[name="doublethinkNature"]:checked')?.value;
            const mathDoublethink = document.getElementById('mathDoublethink').value.trim();
            
            if (slogan1 === 'peace' && 
                slogan2 === 'slavery' && 
                slogan3 === 'strength' && 
                doublethinkNature === 'insanity' && 
                mathDoublethink === 'five') {
                
                roomsCompleted.push(2);
                showMessage(2, 'Perfect! You have grasped the concept of doublethink - the ability to hold contradictory beliefs simultaneously. This "controlled insanity" is essential to the Party\'s mental control.', 'success');
                updateProgress();
                updateRoomIndicator();
                
                setTimeout(() => showRoom(3), 2500);
            } else {
                showMessage(2, 'Your understanding of doublethink is incomplete. Remember that doublethink requires accepting contradictions without question.', 'error');
                if (totalAttempts >= 2) showHint(2);
            }
        }

        // Room 3 Verification - Newspeak
        function checkRoom3() {
            totalAttempts++;
            const newspeakAim = document.getElementById('newspeakAim').value.toLowerCase().trim();
            const crimestop = document.querySelector('input[name="crimestop"]:checked')?.value;
            const newspeakYear = document.getElementById('newspeakYear').value.trim();
            const newspeakResult = document.getElementById('newspeakResult').value;
            
            if ((newspeakAim.includes('limit thought') || newspeakAim.includes('reduce vocabulary') || newspeakAim.includes('eliminate words') || newspeakAim.includes('make thoughtcrime impossible')) && 
                crimestop === 'stopping' && 
                newspeakYear === '2050' && 
                newspeakResult === 'unthinkable') {
                
                roomsCompleted.push(3);
                showMessage(3, 'Correct! Newspeak is designed to make thoughtcrime impossible by eliminating the words to express unorthodox ideas. "Don\'t you see that the whole aim of Newspeak is to narrow the range of thought?"', 'success');
                updateProgress();
                updateRoomIndicator();
                
                setTimeout(() => showRoom(4), 2500);
            } else {
                showMessage(3, 'Incorrect analysis of Newspeak. Consider how language shapes thought and how limiting vocabulary affects thinking.', 'error');
                if (totalAttempts >= 2) showHint(3);
            }
        }

        // Room 4 Verification - Surveillance
        function checkRoom4() {
            totalAttempts++;
            const surveillance = document.getElementById('surveillance').value.toLowerCase().trim();
            const thoughtPolice = document.querySelector('input[name="thoughtPolice"]:checked')?.value;
            const oceaniaLaws = document.getElementById('oceaniaLaws').value.toLowerCase().trim();
            const fearEffect = document.getElementById('fearEffect').value;
            
            if (surveillance === 'telescreens' && 
                thoughtPolice === 'thoughts' && 
                (oceaniaLaws.includes('no laws') || oceaniaLaws.includes('few laws') || oceaniaLaws.includes('not many laws')) && 
                fearEffect === 'police') {
                
                roomsCompleted.push(4);
                showMessage(4, 'Accurate analysis! The telescreens ensure constant surveillance, while the Thought Police punish even thoughts. "There was of course no way of knowing whether you were being watched at any given moment."', 'success');
                updateProgress();
                updateRoomIndicator();
                
                setTimeout(() => showRoom(5), 2500);
            } else {
                showMessage(4, 'Your surveillance analysis needs correction. Remember that Oceania\'s control relies on constant monitoring and self-policing through fear.', 'error');
                if (totalAttempts >= 2) showHint(4);
            }
        }

        // Room 5 Verification - Room 101
        function checkRoom5() {
            totalAttempts++;
            const winstonFear = document.getElementById('winstonFear').value.toLowerCase().trim();
            const winstonBetrayal = document.getElementById('winstonBetrayal').value.toLowerCase().trim();
            const betrayalEffect = document.querySelector('input[name="betrayalEffect"]:checked')?.value;
            const finalWords = document.getElementById('finalWords').value.toLowerCase().trim();
            const partyMotivation = document.getElementById('partyMotivation').value.toLowerCase().trim();
            
            if ((winstonFear.includes('rats') || winstonFear.includes('rodents')) && 
                winstonBetrayal.includes('julia') && 
                betrayalEffect === 'humanity' && 
                finalWords.includes('loved big brother') && 
                (partyMotivation.includes('power') || partyMotivation.includes('control') || partyMotivation.includes('dominance'))) {
                
                roomsCompleted.push(5);
                showMessage(5, 'Complete understanding achieved! You have faced Room 101 and emerged with full comprehension of the Party\'s methods. "Power is not a means; it is an end."', 'success');
                updateProgress();
                updateRoomIndicator();
                
                // Calculate final stats
                const endTime = new Date();
                const timeDiff = (endTime - gameStartTime) / 1000; // in seconds
                const minutes = Math.floor(timeDiff / 60);
                const seconds = Math.floor(timeDiff % 60);
                const score = Math.min(100, 100 - (totalAttempts - 5) * 5 - hintsUsed * 3);
                
                document.getElementById('finalTime').textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                document.getElementById('finalAttempts').textContent = totalAttempts;
                document.getElementById('finalScore').textContent = `${score}/100`;
                
                setTimeout(() => {
                    document.getElementById('completionScreen').classList.add('show');
                }, 2000);
            } else {
                showMessage(5, 'Your final analysis contains errors. Remember that Room 101 breaks a person completely, destroying their humanity.', 'error');
                if (totalAttempts >= 2) showHint(5);
            }
        }

        function restartGame() {
            // Reset all game state
            currentRoom = 0;
            gameStartTime = null;
            totalAttempts = 0;
            roomsCompleted = [];
            hintsUsed = 0;
            
            // Reset all inputs
            document.querySelectorAll('input, textarea, select').forEach(element => {
                if (element.type === 'radio' || element.type === 'checkbox') {
                    element.checked = false;
                } else {
                    element.value = '';
                }
            });
            
            // Hide all hints
            document.querySelectorAll('.hint').forEach(hint => {
                hint.style.display = 'none';
            });
            
            // Clear all messages
            document.querySelectorAll('[id^="message"]').forEach(message => {
                message.innerHTML = '';
            });
            
            // Reset progress
            document.getElementById('progressFill').style.width = '0%';
            
            // Show intro screen
            document.getElementById('introScreen').style.display = 'block';
            document.getElementById('completionScreen').classList.remove('show');
            document.getElementById('cursorEye').style.display = 'none';
        }

        function showReflection() {
            alert("Reflection Questions:\n\n1. How does 1984's portrayal of surveillance compare to modern technology?\n2. Can you identify any 'Newspeak' in today's political language?\n3. What aspects of doublethink do you see in contemporary society?\n4. How does the Party's control of history compare to modern information control?\n5. What personal freedoms would you miss most in Oceania?");
        }

        // Initialize the game when page loads
        window.onload = initGame;
    </script>
</body>
</html>